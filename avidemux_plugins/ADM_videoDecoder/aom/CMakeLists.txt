INCLUDE(vd_plugin)
INCLUDE(admCheckAom)

checkAomDec()

IF (USE_AOM_DEC)
    SET(aom_SRCS
        aomDecPlugin.cpp
        ADM_aomDec.cpp
    )
    SET(PLUGIN_LIBNAME "ADM_vd_aom")
    INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR})
    INCLUDE_DIRECTORIES(${AOM_INCLUDEDIR})

    ADD_LIBRARY(${PLUGIN_LIBNAME} SHARED ${aom_SRCS})
    TARGET_LINK_LIBRARIES(${PLUGIN_LIBNAME} ${AOM_LDFLAGS})
    INIT_VIDEO_DECODER(${PLUGIN_LIBNAME})
    INSTALL_VIDEO_DECODER(${PLUGIN_LIBNAME})
ENDIF (USE_AOM_DEC)
